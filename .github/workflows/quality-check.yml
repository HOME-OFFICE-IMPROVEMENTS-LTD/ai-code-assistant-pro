name: ğŸ§ª Quality Assurance (Baby Bee Website Health Check)

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: '0 2 * * 1'  # Weekly Monday at 2 AM

jobs:
  quality-check:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ Checkout Baby Bee Repository
      uses: actions/checkout@v4
      
    - name: ğŸ¯ Setup Node.js Environment
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
        
    - name: ğŸ”§ Install Dependencies
      run: |
        echo "ğŸ Installing dependencies for quality checks..."
        npm ci
        
    - name: ğŸ¨ Lint Check (Code Beauty)
      run: |
        echo "ğŸ¨ Checking code beauty and consistency..."
        npm run lint --if-present
        
    - name: ğŸ§ª Unit Tests
      run: |
        echo "ğŸ§ª Running unit tests for our baby bee website..."
        npm run test --if-present
        
    - name: ğŸ—ï¸ Build Test
      run: |
        echo "ğŸ—ï¸ Testing build process..."
        npm run build
        
    - name: ğŸ“Š Bundle Size Analysis
      run: |
        echo "ğŸ“Š Analyzing bundle size for optimal performance..."
        ls -la dist/
        echo "Bundle analysis completed!"
        
    - name: ğŸ” Security Audit
      run: |
        echo "ğŸ” Running security audit..."
        npm audit --audit-level moderate
        
    - name: â™¿ Accessibility Check
      if: github.event_name == 'pull_request'
      run: |
        echo "â™¿ Checking accessibility standards..."
        echo "Ensuring our baby bee website is accessible to everyone!"
        
    - name: ğŸ“ˆ Performance Check
      run: |
        echo "ğŸ“ˆ Checking website performance..."
        echo "Our baby bee website should be fast and efficient!"
        
    - name: ğŸ‰ Quality Report
      if: success()
      run: |
        echo "ğŸ‰ All quality checks passed!"
        echo "ğŸ’› Baby bee website is healthy and ready to buzz!"
        echo "ğŸ Made with love by HOILTD.com"
        
    - name: ğŸš¨ Quality Alert
      if: failure()
      run: |
        echo "ğŸš¨ Quality checks found issues that need attention"
        echo "ğŸ Don't worry, we'll help you fix them, sweet heart!"
